<%@ template version="1.0" language = "groovy" %>
SELECT S.SCHEMAID, S.SCHEMANAME, 
	T.TABLEID, T.TABLENAME, T.TABLETYPE,
	C.COLUMNNAME, C.COLUMNNUMBER
FROM SYS.SYSSCHEMAS S 
JOIN SYS.SYSTABLES T ON T.SCHEMAID = S.SCHEMAID
JOIN SYS.SYSCOLUMNS C ON C.REFERENCEID = T.TABLEID
ORDER BY T.TABLENAME, C.COLUMNNAME
<%

resultModel = [
	entity(
		name: "sysschema",
		attributes: [ "SCHEMAID", "SCHEMANAME" ],
		key: "SCHEMAID",
		collections: [ tables: "systable" ]
	),
	entity(
		name: "systable",
		attributes: [ "SCHEMAID", "TABLEID", "TABLENAME", "TABLETYPE" ],
		key: "TABLEID",
		collections: [ columns: "syscolumn" ],
		references: [ schema: "sysschema" ]
	),
	entity(
		name: "syscolumn",
		attributes: [ "COLUMNNAME", "COLUMNNUMBER" ],
		key: [ "TABLEID", "COLUMNNAME" ],
		references: [ table: "systable" ]
	)
]

%>
